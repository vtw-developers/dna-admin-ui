<div id="tabs">
  <dx-tabs
    #apiTabs
    [dataSource]="tabs"
    [selectedIndex]="0"
    (onItemClick)="selectTab($event)"
  ></dx-tabs>
  <div class="content dx-fieldset"  *ngIf="apiTabs.selectedIndex === 0">
    <dx-data-grid
      #grid
      [dataSource]= roleAuthList
      [showBorders]="true"
      [remoteOperations]="true"
      [hoverStateEnabled]="true"
      [selectedRowKeys]="[]"
    >
      <dxi-column dataField="authority.name" dataType="string" caption="권한명"></dxi-column>
      <dxi-column type="buttons" caption="해제">
        <dxi-button
          text="해제"
          icon="../../../assets/icons/common/DeleteTest_riderLight.svg"
          [onClick]="deleteAuth"
        ></dxi-button>
      </dxi-column>
      <dxo-selection mode="single"></dxo-selection>
      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager
        [showPageSizeSelector]="true"
        [allowedPageSizes]="[5, 10, 20]"
        [showInfo]="true"
        [visible]="true"
      ></dxo-pager>

      <dxo-search-panel
        [visible]="true"
        placeholder="권한 검색"
      ></dxo-search-panel>

      <dxo-toolbar>
        <dxi-item location="after" locateInMenu="auto">
          <dx-button
            text="권한 추가"
            icon="plus"
            type="default"
            stylingMode="contained"
            (onClick)="createAuth()"
          ></dx-button>
        </dxi-item>
        <dxi-item
          location="after"
          locateInMenu="auto"
          showText="inMenu"
          widget="dxButton"
          [options]="{ text: 'Refresh', icon: 'refresh', onClick: refresh, stylingMode: 'text' }"
        ></dxi-item>
        <dxi-item name="searchPanel" locateInMenu="auto" onEnter></dxi-item>
      </dxo-toolbar>
    </dx-data-grid>
  </div>

  <div class="content dx-fieldset"  *ngIf="apiTabs.selectedIndex === 1">
    <dx-data-grid
      #grid
      [dataSource]= roleUserList
      [showBorders]="true"
      [remoteOperations]="true"
      [hoverStateEnabled]="true"
      [selectedRowKeys]="[]"
    >
      <dxi-column dataField="users.userId" dataType="string" caption="ID"></dxi-column>
      <dxi-column dataField="users.name" dataType="string" caption="이름"></dxi-column>
      <dxi-column type="buttons" caption="해제">
        <dxi-button
          text="해제"
          icon="../../../assets/icons/common/DeleteTest_riderLight.svg"
          [onClick]="deleteUser"
        ></dxi-button>
      </dxi-column>
      <dxo-selection mode="single"></dxo-selection>
      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager
        [showPageSizeSelector]="true"
        [allowedPageSizes]="[5, 10, 20]"
        [showInfo]="true"
        [visible]="true"
      ></dxo-pager>

      <dxo-search-panel
        [visible]="true"
        placeholder="사용자 검색"
      ></dxo-search-panel>

      <dxo-toolbar>
        <dxi-item location="after" locateInMenu="auto">
          <dx-button
            text="사용자 추가"
            icon="plus"
            type="default"
            stylingMode="contained"
            (onClick)="createUser()"
          ></dx-button>
        </dxi-item>
        <dxi-item
          location="after"
          locateInMenu="auto"
          showText="inMenu"
          widget="dxButton"
          [options]="{ text: 'Refresh', icon: 'refresh', onClick: refresh, stylingMode: 'text' }"
        ></dxi-item>
        <dxi-item name="searchPanel" locateInMenu="auto" onEnter></dxi-item>
      </dxo-toolbar>
    </dx-data-grid>
  </div>
</div>

<roleAuth-edit-popup (onSaved)="onSavedAuth()" [selectedCurrentItem] = "currentItem"></roleAuth-edit-popup>
<roleUser-edit-popup (onSaved)="onSavedUser()" [selectedCurrentItem] = "currentItem"></roleUser-edit-popup>
